{"version":3,"file":"visual.js","mappings":"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","sources":["webpack:///./src/visual.ts","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./.tmp/precompile/visualPlugin.ts"],"sourcesContent":["\"use strict\";\n\nimport powerbi from \"powerbi-visuals-api\";\nimport VisualConstructorOptions = powerbi.extensibility.visual.VisualConstructorOptions;\nimport VisualUpdateOptions = powerbi.extensibility.visual.VisualUpdateOptions;\nimport IVisual = powerbi.extensibility.visual.IVisual;\nimport IVisualHost = powerbi.extensibility.visual.IVisualHost;\nimport VisualObjectInstance = powerbi.VisualObjectInstance;\nimport EnumerateVisualObjectInstancesOptions = powerbi.EnumerateVisualObjectInstancesOptions;\nimport VisualObjectInstanceEnumerationObject = powerbi.VisualObjectInstanceEnumerationObject;\n\nimport \"../style/visual.less\";\n\ninterface RowData {\n    label: string;\n    amount: string;\n    \n    columnIndex: number; \n    sortIndex: number;\n    \n    // Espacement\n    marginBottom: number;\n    marginTop: number; // <--- NOUVEAU\n    marginColor: string;\n    isHidden: boolean; // <--- NOUVEAU\n\n    font: string;\n    fontSize: number;\n    bgLabel: string;\n    colorLabel: string;\n    boldLabel: boolean;\n    italicLabel: boolean;\n    bgAmount: string;\n    colorAmount: string;\n    boldAmount: boolean;\n}\n\nexport class Visual implements IVisual {\n    private target: HTMLElement;\n    private host: IVisualHost;\n    private divContainer: HTMLDivElement;\n    private flexContainer: HTMLDivElement;\n    \n    private allRowsData: RowData[] = [];\n    private categoricalData: any;\n    private currentSelectedLabel: string = \"\"; \n    \n    private columnTitles: string[] = [\"COLONNE 1\", \"COLONNE 2\", \"COLONNE 3\", \"COLONNE 4\"];\n\n    constructor(options: VisualConstructorOptions) {\n        this.host = options.host;\n        this.target = options.element;\n\n        this.divContainer = document.createElement(\"div\");\n        this.divContainer.className = \"scroll-wrapper\";\n        this.target.appendChild(this.divContainer);\n\n        this.flexContainer = document.createElement(\"div\");\n        this.flexContainer.className = \"accounting-container\";\n        this.divContainer.appendChild(this.flexContainer);\n    }\n\n    public update(options: VisualUpdateOptions) {\n        this.flexContainer.innerHTML = \"\";\n        this.allRowsData = [];\n\n        const dataView = options.dataViews[0];\n        if (!dataView || !dataView.categorical || !dataView.categorical.categories) return;\n\n        this.categoricalData = dataView.categorical;\n        const categories = dataView.categorical.categories[0];\n        const values = dataView.categorical.values ? dataView.categorical.values[0] : null;\n\n        if (dataView.metadata && dataView.metadata.objects && dataView.metadata.objects[\"titresColonnes\"]) {\n            const t = dataView.metadata.objects[\"titresColonnes\"];\n            if (t[\"titre1\"]) this.columnTitles[0] = t[\"titre1\"] as string;\n            if (t[\"titre2\"]) this.columnTitles[1] = t[\"titre2\"] as string;\n            if (t[\"titre3\"]) this.columnTitles[2] = t[\"titre3\"] as string;\n            if (t[\"titre4\"]) this.columnTitles[3] = t[\"titre4\"] as string;\n        }\n\n        if (dataView.metadata && dataView.metadata.objects && dataView.metadata.objects[\"selectionMenu\"]) {\n            this.currentSelectedLabel = dataView.metadata.objects[\"selectionMenu\"][\"ligneActive\"] as string;\n        }\n        if (!this.currentSelectedLabel && categories.values.length > 0) {\n            this.currentSelectedLabel = categories.values[0].toString();\n        }\n\n        let maxColumnIndexUsed = 1;\n\n        categories.values.forEach((catValue, index) => {\n            const label = catValue.toString();\n\n            let row: RowData = {\n                label: label,\n                amount: values ? values.values[index]?.toString() : \"\",\n                columnIndex: 1, \n                sortIndex: index,\n                marginBottom: 0,\n                marginTop: 0,\n                isHidden: false,\n                marginColor: \"transparent\",\n                font: \"'Segoe UI', sans-serif\",\n                fontSize: 12,\n                bgLabel: \"transparent\",\n                colorLabel: \"black\",\n                boldLabel: false,\n                italicLabel: false,\n                bgAmount: \"transparent\",\n                colorAmount: \"black\",\n                boldAmount: false\n            };\n\n            if (categories.objects && categories.objects[index]) {\n                const object = categories.objects[index];\n                if (object[\"styleLigne\"]) {\n                    const style = object[\"styleLigne\"];\n                    \n                    if (style[\"columnIndex\"]) row.columnIndex = style[\"columnIndex\"] as number;\n                    if (row.columnIndex < 1) row.columnIndex = 1;\n                    if (style[\"ordreTri\"] !== undefined) row.sortIndex = style[\"ordreTri\"] as number;\n                    \n                    // Lecture Espacements\n                    if (style[\"marginBottom\"]) row.marginBottom = style[\"marginBottom\"] as number;\n                    if (style[\"marginTop\"]) row.marginTop = style[\"marginTop\"] as number; // <--- Nouveau\n                    if (style[\"isHidden\"]) row.isHidden = style[\"isHidden\"] as boolean; // <--- Nouveau\n                    if (style[\"marginColor\"]) row.marginColor = (style[\"marginColor\"] as any).solid.color;\n\n                    if (style[\"fontFamily\"]) row.font = style[\"fontFamily\"] as string;\n                    if (style[\"fontSize\"]) row.fontSize = style[\"fontSize\"] as number;\n                    if (style[\"bgLabel\"]) row.bgLabel = (style[\"bgLabel\"] as any).solid.color;\n                    if (style[\"fillLabel\"]) row.colorLabel = (style[\"fillLabel\"] as any).solid.color;\n                    if (style[\"boldLabel\"] !== undefined) row.boldLabel = style[\"boldLabel\"] as boolean;\n                    if (style[\"italicLabel\"] !== undefined) row.italicLabel = style[\"italicLabel\"] as boolean;\n                    if (style[\"bgAmount\"]) row.bgAmount = (style[\"bgAmount\"] as any).solid.color;\n                    if (style[\"fillAmount\"]) row.colorAmount = (style[\"fillAmount\"] as any).solid.color;\n                    if (style[\"boldAmount\"] !== undefined) row.boldAmount = style[\"boldAmount\"] as boolean;\n                }\n            }\n            \n            if (row.columnIndex > maxColumnIndexUsed) maxColumnIndexUsed = row.columnIndex;\n            this.allRowsData.push(row);\n        });\n\n        for (let i = 1; i <= maxColumnIndexUsed; i++) {\n            const colDiv = document.createElement(\"div\");\n            colDiv.className = \"dynamic-column\"; \n            const table = document.createElement(\"table\");\n            colDiv.appendChild(table);\n\n            const colRows = this.allRowsData.filter(r => r.columnIndex === i);\n            const colTitle = this.columnTitles[i-1] || (\"COLONNE \" + i);\n\n            this.renderTableContent(table, colTitle, colRows);\n            this.flexContainer.appendChild(colDiv);\n        }\n    }\n\n    private renderTableContent(targetTable: HTMLTableElement, title: string, rows: RowData[]) {\n        rows.sort((a, b) => a.sortIndex - b.sortIndex);\n\n        const thead = document.createElement(\"thead\");\n        const trHead = document.createElement(\"tr\");\n        const th = document.createElement(\"th\");\n        th.colSpan = 2;\n        th.innerText = title;\n        trHead.appendChild(th);\n        thead.appendChild(trHead);\n        targetTable.appendChild(thead);\n\n        const tbody = document.createElement(\"tbody\");\n        \n        rows.forEach(row => {\n            // --- 1. SI MASQUÉE, ON PASSE À LA SUIVANTE ---\n            if (row.isHidden) return; \n\n            // --- 2. GESTION MARGE HAUT (Espace avant) ---\n            if (row.marginTop > 0) {\n                const trSpacerTop = document.createElement(\"tr\");\n                trSpacerTop.style.height = row.marginTop + \"px\";\n                const tdSpacer = document.createElement(\"td\");\n                tdSpacer.colSpan = 2;\n                tdSpacer.style.backgroundColor = row.marginColor; // Utilise la même couleur\n                tdSpacer.style.border = \"none\";\n                trSpacerTop.appendChild(tdSpacer);\n                tbody.appendChild(trSpacerTop);\n            }\n\n            // --- 3. LIGNE DE DONNÉES ---\n            const tr = document.createElement(\"tr\");\n            \n            let finalAmount = \"\";\n            let rawVal = parseFloat(row.amount);\n            if (row.amount && !isNaN(rawVal) && rawVal !== 0) {\n                finalAmount = new Intl.NumberFormat('fr-FR', { style: 'currency', currency: 'EUR', minimumFractionDigits: 0 }).format(rawVal);\n            }\n\n            tr.style.fontFamily = row.font;\n            tr.style.fontSize = row.fontSize + \"px\";\n            tr.style.height = \"30px\";\n\n            const tdName = document.createElement(\"td\");\n            tdName.innerText = row.label;\n            tdName.style.backgroundColor = row.bgLabel;\n            tdName.style.color = row.colorLabel;\n            if (row.boldLabel) tdName.style.fontWeight = \"bold\";\n            if (row.italicLabel) tdName.style.fontStyle = \"italic\";\n            tr.appendChild(tdName);\n\n            const tdAmount = document.createElement(\"td\");\n            tdAmount.innerText = finalAmount;\n            tdAmount.style.textAlign = \"right\";\n            tdAmount.style.backgroundColor = row.bgAmount;\n            tdAmount.style.color = row.colorAmount;\n            if (row.boldAmount) tdAmount.style.fontWeight = \"bold\";\n            tr.appendChild(tdAmount);\n\n            tbody.appendChild(tr);\n\n            // --- 4. GESTION MARGE BAS (Espace après) ---\n            if (row.marginBottom > 0) {\n                const trSpacerBottom = document.createElement(\"tr\");\n                trSpacerBottom.style.height = row.marginBottom + \"px\";\n                const tdSpacer = document.createElement(\"td\");\n                tdSpacer.colSpan = 2;\n                tdSpacer.style.backgroundColor = row.marginColor;\n                tdSpacer.style.border = \"none\";\n                trSpacerBottom.appendChild(tdSpacer);\n                tbody.appendChild(trSpacerBottom);\n            }\n        });\n        targetTable.appendChild(tbody);\n    }\n\n    public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstance[] | VisualObjectInstanceEnumerationObject {\n        const instances: VisualObjectInstance[] = [];\n        if (!this.categoricalData) return instances;\n        const categories = this.categoricalData.categories[0];\n\n        if (options.objectName === \"titresColonnes\") {\n            instances.push({\n                objectName: \"titresColonnes\", selector: null,\n                properties: { \n                    titre1: this.columnTitles[0], titre2: this.columnTitles[1], \n                    titre3: this.columnTitles[2], titre4: this.columnTitles[3] \n                }\n            });\n        }\n\n        if (options.objectName === \"selectionMenu\") {\n            instances.push({\n                objectName: \"selectionMenu\", selector: null, \n                properties: { ligneActive: this.currentSelectedLabel }\n            });\n        }\n\n        if (options.objectName === \"styleLigne\") {\n            const indexChoisi = categories.values.findIndex(v => v.toString() === this.currentSelectedLabel);\n            if (indexChoisi !== -1) {\n                const selectionId = this.host.createSelectionIdBuilder().withCategory(categories, indexChoisi).createSelectionId();\n                \n                let props: any = {\n                    columnIndex: 1, ordreTri: indexChoisi,\n                    marginBottom: 0, marginTop: 0, isHidden: false, // <--- Defaults\n                    marginColor: { solid: { color: \"\" } },\n\n                    fontFamily: \"\", fontSize: 12,\n                    bgLabel: { solid: { color: \"\" } }, fillLabel: { solid: { color: \"black\" } },\n                    boldLabel: false, italicLabel: false,\n                    bgAmount: { solid: { color: \"\" } }, fillAmount: { solid: { color: \"black\" } }, boldAmount: false\n                };\n\n                if (categories.objects && categories.objects[indexChoisi]) {\n                    const style = categories.objects[indexChoisi][\"styleLigne\"];\n                    if (style) {\n                         if (style[\"columnIndex\"]) props.columnIndex = style[\"columnIndex\"];\n                         if (style[\"ordreTri\"] !== undefined) props.ordreTri = style[\"ordreTri\"];\n                         \n                         if (style[\"marginBottom\"] !== undefined) props.marginBottom = style[\"marginBottom\"];\n                         if (style[\"marginTop\"] !== undefined) props.marginTop = style[\"marginTop\"];\n                         if (style[\"isHidden\"] !== undefined) props.isHidden = style[\"isHidden\"];\n                         if (style[\"marginColor\"]) props.marginColor = style[\"marginColor\"];\n\n                         if (style[\"fontFamily\"]) props.fontFamily = style[\"fontFamily\"];\n                         if (style[\"fontSize\"]) props.fontSize = style[\"fontSize\"];\n                         \n                         if (style[\"bgLabel\"]) props.bgLabel = style[\"bgLabel\"];\n                         if (style[\"fillLabel\"]) props.fillLabel = style[\"fillLabel\"];\n                         if (style[\"boldLabel\"] !== undefined) props.boldLabel = style[\"boldLabel\"];\n                         if (style[\"italicLabel\"] !== undefined) props.italicLabel = style[\"italicLabel\"];\n                         if (style[\"bgAmount\"]) props.bgAmount = style[\"bgAmount\"];\n                         if (style[\"fillAmount\"]) props.fillAmount = style[\"fillAmount\"];\n                         if (style[\"boldAmount\"] !== undefined) props.boldAmount = style[\"boldAmount\"];\n                    }\n                }\n\n                instances.push({\n                    objectName: \"styleLigne\",\n                    selector: selectionId.getSelector(), \n                    properties: props\n                });\n            }\n        }\n        return instances;\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Visual } from \"../../src/visual\";\nimport powerbiVisualsApi from \"powerbi-visuals-api\";\nimport IVisualPlugin = powerbiVisualsApi.visuals.plugins.IVisualPlugin;\nimport VisualConstructorOptions = powerbiVisualsApi.extensibility.visual.VisualConstructorOptions;\nimport DialogConstructorOptions = powerbiVisualsApi.extensibility.visual.DialogConstructorOptions;\nvar powerbiKey: any = \"powerbi\";\nvar powerbi: any = window[powerbiKey];\nvar monTableauPersoCF0BED4C19044D588EBF656397EF1EB4_DEBUG: IVisualPlugin = {\n    name: 'monTableauPersoCF0BED4C19044D588EBF656397EF1EB4_DEBUG',\n    displayName: 'monTableauPerso',\n    class: 'Visual',\n    apiVersion: '5.3.0',\n    create: (options?: VisualConstructorOptions) => {\n        if (Visual) {\n            return new Visual(options);\n        }\n        throw 'Visual instance not found';\n    },\n    createModalDialog: (dialogId: string, options: DialogConstructorOptions, initialState: object) => {\n        const dialogRegistry = (<any>globalThis).dialogRegistry;\n        if (dialogId in dialogRegistry) {\n            new dialogRegistry[dialogId](options, initialState);\n        }\n    },\n    custom: true\n};\nif (typeof powerbi !== \"undefined\") {\n    powerbi.visuals = powerbi.visuals || {};\n    powerbi.visuals.plugins = powerbi.visuals.plugins || {};\n    powerbi.visuals.plugins[\"monTableauPersoCF0BED4C19044D588EBF656397EF1EB4_DEBUG\"] = monTableauPersoCF0BED4C19044D588EBF656397EF1EB4_DEBUG;\n}\nexport default monTableauPersoCF0BED4C19044D588EBF656397EF1EB4_DEBUG;"],"names":[],"ignoreList":[],"sourceRoot":""}